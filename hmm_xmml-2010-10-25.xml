<model id="HMM" name="Hierarchical Multiscale Method">
  <description>
    Hierarchical Multiscale Method (HMM).
  </description>

	<submodels>
		<submodel id="macro" name="Macro model" environment="fluid" class="kernel.macro.Macro" >
			<scale type="time" id="t" delta="-1" max="1"/>
			<scale type="space" id="x" delta="-2" max="0"/>
			<scale type="space" id="y" delta="-2" max="0"/>
			
			<ports>
				<in id="viscosity" operator="C" type="doubleProperty" multiplicity="dynamic"/>
				<out id="shear_stress" operator="Oi" type="doubleProperty" multiplicity="dynamic"/>
			</ports>
		</submodel>
		<submodel id="micro" name="Micro model" environment="fluid.microfluid" class="kernel.flow3d.FlowTestController" persistence="none">
			<scale type="time" id="t" delta="-3" max="-1"/>
			<scale type="space" id="x" delta="-6" max="-4"/>
			<scale type="space" id="y" delta="-6" max="-4"/>
			
			<ports>
				<in id="shear_stress" operator="finit" type="doubleProperty"/>
				<out id="viscosity" operator="Of" type="doubleProperty"/>
			</ports>
		</submodel>
	</submodels>
	
	<couplings>
		<coupling id="macro2micro" from="macro.viscosity" to="micro.viscosity"/>
		<coupling id="micro2macro" from="micro.viscosity" to="macro.viscosity"/>
	</couplings>
	
	<datatypes>
		<datatype id="doubleProperty" class="datatype.DoubleProperty" size="sizeof(double)"/>
	</datatypes>
	
	<environments>
	  <environment id="fluid">
	    <param id="xmin" type="double"/>
	    <param id="ymin" type="double"/>
	    <param id="init_viscosity" type="double"/>
	    <environment id="microfluid">
  	    <param id="xmin" type="double"/>
  	    <param id="ymin" type="double"/>
  	    <param id="num_elem" type="int"/>
      </environment>
    </environment>
  </environments>
</model>