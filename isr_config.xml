<simulation type="ISR2D">
	<components>
		<component id="init" submodel="INIT" domain="artery">
			<!-- strut properties -->
			<param id="no_of_struts">4</param>
			<param id="strut_side" unit="mm">0.18</param>
			<param id="max_deploy" unit="mm">0.09</param> 			<!-- test_hannan -- changing deployment depths -->

			<param id="deploy_max_iter_1">150</param>         <!-- number of iterations to resolve deployment -->
			<param id="deploy_max_iter_2">1</param>           <!-- number of iterations after deployment -->
			<param id="deploy_png_iter">1</param>             <!--  png plotting interval -->
			<param id="deploy_png_quantity">"stress"</param>  <!--  quantity to plot -->
			<param id="deploy_png_min_value">0.0</param>
			<param id="deploy_png_max_value">0.01</param>

			<!-- cell properties -->
			<param id="smc_mean_rad" unit="mm">0.0151934</param>
			<param id="smc_sigm_rad" unit="mm">0.000</param>
			<param id="ec_mean_rad" unit="mm">0.00426935</param>
			<param id="ec_sigm_rad" unit="mm">0.000</param>
		</component>
		<component id="init2" submodel="INIT" domain="artery2">
		</component>
		<component id="bf" submodel="BF" domain="artery.blood"/>
			<param id="directory">file://home/joris/Documents/dev/muscle/Sim_actual/component/flow3d/param/BF_Re=120_dx=1e-2_150_148/</param>
			<param id="max_timesteps">3110400*2</param>
			<param id="max_iter">100</param>
			<param id="coarsest_dt">1</param>
			<param id="finest_dt">1</param>
		</component>
		<component id="smc" submodel="SMC" domain="artery.tissue">
			<param id="smc_max_strain">1.0</param>                      <!-- threshold (hoop) strain for smc apoptosis/necrosis -->
			<param id="smc_max_stress">1.0</param>                      <!-- threshold stress for smc apoptosis/necrosis -->
			<param id="iel_max_l_strain">0.05</param>                   <!-- threshold (longitudinal) strain for iel breaking -->
			<param id="iel_max_h_strain">0.05</param>                   <!-- threshold (hoop) strain for iel breaking -->
			<param id="iel_max_stress">1.0</param>                      <!-- threshold stress for iel breaking   -->

			<param id="smc_drug_conc_thresholdL">1.0</param>    <!-- drug concentration threshold for smc proliferation -->
			<param id="smc_drug_conc_thresholdH">1.0</param>
			<param id="smc_OSI_thresholdL">0.45</param>
			<param id="smc_OSI_thresholdH">0.5</param> 
			<param id="smc_wss_thresholdL">2.76</param>                <!-- wss_max threshold for smc proliferation -->
			<param id="smc_wss_thresholdH">3</param>
			<param id="ic_smc_hex">1</param>                            <!-- 1 for hexagonal packing of smcs, 0 for "realistic" distributions -->
			<param id="solver_fixed_run_time">2000</param>              <!-- fixed run time of physical solver, internal units -->
			<param id="compressive_hoop_stiffness">1.0</param>          <!-- relative hoop stiffness in compressive regime -->
			<param id="png_width" unit="px">800</param>                       <!-- width of png image produced -->
			<param id="strut_rep">obstacle</param>                      <!-- strut representation: boundary_element or obstacle -->
			<param id="ci_threshold_count">4</param>
			<param id="ci_weight_smc">1</param>
			<param id="ci_weight_iel">3</param>
			<param id="ci_weight_obstacle">1</param>
			<param id="ci_range_factor">1.1</param>
			<param id="adventitia_width" unit="mm">0.00</param>
		
			<!-- params used by equilibration code -->
			<param id="equilibrate_max_iter_1">10</param>               <!-- maximal number of iterations without radial force; set to 1 -->
			<param id="equilibrate_png_iter">1</param>                  <!-- png plotting interval -->
			<param id="equilibrate_png_quantity">"stress"</param>         <!-- quantity to plot -->
			<param id="equilibrate_png_min_value">0.0</param>
			<param id="equilibrate_png_max_value">0.01</param>
		</component>
		<component id="dd" submodel="DD" domain="artery.tissue">
			<param id="dd_dx" unit="mm">0.01</param>
		</component>
	</components>

  <domains>
		<domain id="artery">
			<param id="length" unit="mm">1.5</param>
			<param id="total_width" unit="mm">1.24</param>
			<param id="lumen_width" unit="mm">1.0</param>

			<!-- bounding box -->
			<param id="xmin_bb" unit="mm">0.0</param>
			<param id="ymin_bb" unit="mm">-0.75</param> 
			<param id="zmin_bb" unit="mm">0.0</param>
			<param id="width_bb" unit="mm">1.5</param>

			<!-- discretization -->
			<param id="xmin" unit="mm">0.0</param>
			<param id="ymin" unit="mm">-0.62</param>
			<param id="zmin" unit="mm">0.0</param>

			<domain id="blood">
				<param id="kin_viscosity[m2/s]">4E-6</param>
				<param id="U_max[m/s]">0.121</param>
				<param id="rho0[kg/m3]">1000</param>
				<param id="flowdt" unit="s">0.0001</param>
				<param id="flowdx" unit="mm">0.01</param>
			</domain>
		
			<domain id="tissue">
				<param id="tunica_width" unit="mm">0.12</param>
			</domain>
		</domain>
	</domains>
	
	<connections>
		<connection coupling="ic2smc" from="init" to="smc"/>
		<connection coupling="smc2dd" from="smc" to="dd" convert_at="from"/>
		<connection coupling="smc2bf" from="smc" to="bf" convert_at="from"/>
		<connection coupling="dd2smc" from="dd" to="smc" convert_at="to"/>
		<connection coupling="bf2smc" from="bf" to="smc" convert_at="to"/>
	</connections>
</model>